webpackJsonp([14],{HhVV:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("md-card",[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[t._v("帐号帮助")]),t._v(" "),e("div",{staticClass:"md-body-1"},[t._v("获取验证码")])])],1),t._v(" "),e("md-list",[e("md-list-item",[e("md-avatar",[e("md-image",{attrs:{"md-src":t.mainDatas.avatar}})],1),t._v(" "),e("div",{staticClass:"md-list-item-text"},[e("span",[t._v(t._s(t.mainDatas.name))]),t._v(" "),e("span",[t._v(t._s(t.mainDatas.mobile))])]),t._v(" "),e("md-button",{staticClass:"md-icon-button md-list-action",attrs:{to:{name:"auth.chooser",query:t.routeQuery}}},[e("md-icon",{staticClass:"md-primary"},[t._v("expand_more")])],1)],1)],1),t._v(" "),e("md-card-content",[e("p",[t._v(t._s(t.tipLabel))])]),t._v(" "),e("md-card-actions",[e("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:t.disabledSendBtn},on:{click:t.onSendCode}},[t._v("发送验证码")])],1),t._v(" "),e("form",{attrs:{novalidate:""},on:{submit:function(n){n.preventDefault(),t.validateForm(n)}}},[e("md-card-content",[e("md-layout",[e("md-field",{class:t.getValidationClass("token")},[e("label",[t._v("验证码")]),t._v(" "),e("md-input",{attrs:{autocomplete:"off",disabled:t.sending},model:{value:t.mainDatas.token,callback:function(n){t.$set(t.mainDatas,"token",n)},expression:"mainDatas.token"}}),t._v(" "),t.$v.mainDatas.token.required?t._e():e("span",{staticClass:"md-error"},[t._v("请输入验证码")]),t._v(" "),t.$v.mainDatas.token.minLength&&t.$v.mainDatas.token.maxLength?t._e():e("span",{staticClass:"md-error"},[t._v("验证码格式不符合要求")])],1)],1)],1),t._v(" "),e("md-card-actions",[e("md-button",{staticClass:"md-primary",on:{click:t.onOtherClick}},[t._v("我没有使用手机")]),t._v(" "),e("span",{staticClass:"flex"}),t._v(" "),e("md-button",{staticClass:"md-primary md-raised",attrs:{type:"submit",disabled:t.disabledConfirmBtn}},[t._v("下一步")])],1)],1),t._v(" "),t.sending?e("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):t._e()],1)},staticRenderFns:[]}},eXAi:function(t,n,e){var a=e("VU/8")(e("yl+w"),e("HhVV"),!1,function(t){e("jk9j")},"data-v-2b64d3ce",null);t.exports=a.exports},jk9j:function(t,n,e){var a=e("xDAS");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("147eedae",a,!0)},xDAS:function(t,n,e){(t.exports=e("FZ+f")(void 0)).push([t.i,".md-card-actions[data-v-2b64d3ce]{-webkit-box-pack:center;justify-content:center}",""])},"yl+w":function(t,n,e){"use strict";function a(t){return function(){var n=t.apply(this,arguments);return new Promise(function(t,e){function a(i,s){try{var r=n[i](s),o=r.value}catch(t){return void e(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}return a("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("ESwS"),s=e("+cKO");n.default={name:"GmfPagesAuthPasswordFindSms",props:{},mixins:[i.validationMixin],data:function(){return{mainDatas:{},loading:0,sending:!1,isSended:!1}},validations:{mainDatas:{token:{required:s.required,minLength:(0,s.minLength)(6),maxLength:(0,s.maxLength)(6)}}},computed:{routeQuery:function(){var t={};return this.$route.query&&this.$route.query.continue&&(t.continue=this.$route.query.continue),t},disabledSendBtn:function(){return this.sending||this.isSended||!!this.mainDatas.token},disabledConfirmBtn:function(){return this.sending||!this.isSended||!this.mainDatas.token},tipLabel:function(){return this.$root.appName+" 会将验证码发送到 "+this.mainDatas.mobile}},methods:{onOtherClick:function(){this.$go({name:"auth.password.find.mail",params:{id:this.mainDatas.id},query:this.routeQuery})},onSendCode:function(){var t=this;this.sending=!0;var n={id:this.mainDatas.id,account:this.mainDatas.account,type:"password",mode:"sms"};this.$http.post("sys/auth/vcode-create",n).then(function(n){t.isSended=!0,t.sending=!1,t.$toast("验证码已发送到您的手机上，请及时查收!")}).catch(function(n){t.sending=!1,t.$toast(n)})},getValidationClass:function(t){var n=this.$v.mainDatas[t];if(n)return{"md-invalid":n.$invalid&&n.$dirty}},validateForm:function(){this.$v.$touch(),this.$v.$invalid||this.submitPost()},submitPost:function(){var t=this;this.sending=!0;var n={id:this.mainDatas.id,account:this.mainDatas.account,type:"password",token:this.mainDatas.token};this.$http.post("sys/auth/vcode-checker",n).then(function(n){t.sending=!1,t.$go({name:"auth.reset",params:{id:t.mainDatas.id,token:t.mainDatas.token},query:t.routeQuery})}).catch(function(n){t.sending=!1,t.$toast(n)})},fetchData:function(){var t=a(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.sending=!0,(n=this.$route.params.id)||this.$go({name:"auth.login",query:this.routeQuery}),t.next=6,this.$http.post("sys/auth/checker",{id:n});case 6:e=t.sent,this.mainDatas=e.data.data,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),this.$toast(t.t0),this.$go({name:"auth.identifier",query:this.routeQuery});case 14:return t.prev=14,this.sending=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[0,10,14,17]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}});