webpackJsonp([5],{"139G":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"GmfPagesAuthSns",props:{title:{type:String,default:"使用合作账号登录"},type:{type:String,default:"login"}},data:function(){return{sending:!1}},computed:{canSns:function(){return!(!this.$root.configs.auth||!this.$root.configs.auth.sns)&&this.$root.configs.auth.sns},snsQQ:function(){return!!this.canSns&&this.makeUrl(this.$root.configs.auth.sns.qq)},snsWeixin:function(){return!!this.canSns&&this.makeUrl(this.$root.configs.auth.sns.weixin)},snsWeibo:function(){return!!this.canSns&&this.makeUrl(this.$root.configs.auth.sns.weibo)}},methods:{fetchData:function(){},makeUrl:function(t){return t&&this.type?t.indexOf("?")>0?t+"&type="+this.type:t+"?type="+this.type:t||!1}},mounted:function(){this.fetchData()}}},"9dRT":function(t,n,e){var a=e("VU/8")(e("139G"),e("LWIg"),!1,function(t){e("y2Uo")},"data-v-30221a1a",null);t.exports=a.exports},LWIg:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.canSns?e("md-card-content",{staticClass:"login-sns"},[e("div",{staticClass:"md-subheading"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"layout-row layout-align-center-center"},[t.snsQQ?e("md-button",{staticClass:"md-icon-button md-raised md-primary",attrs:{href:t.snsQQ}},[e("md-icon",{attrs:{"md-src":"/assets/vendor/gmf-sys/svg/auth-qq.svg"}})],1):t._e(),t._v(" "),t.snsWeixin?e("md-button",{staticClass:"md-icon-button md-raised md-primary",attrs:{href:t.snsWeixin}},[e("md-icon",{attrs:{"md-src":"/assets/vendor/gmf-sys/svg/auth-weixin.svg"}})],1):t._e(),t._v(" "),t.snsWeibo?e("md-button",{staticClass:"md-icon-button md-raised md-primary",attrs:{href:t.snsWeibo}},[e("md-icon",{attrs:{"md-src":"/assets/vendor/gmf-sys/svg/auth-weibo.svg"}})],1):t._e()],1)]):t._e()},staticRenderFns:[]}},PGf7:function(t,n,e){var a=e("VU/8")(e("dwM3"),e("gExv"),!1,null,null,null);t.exports=a.exports},dwM3:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});a(e("jFJc"));var s=a(e("9dRT")),i=e("ESwS"),o=e("+cKO");n.default={name:"GmfPagesAuthAccountJoin",components:{AuthSns:s.default},mixins:[i.validationMixin],data:function(){return{mainDatas:{},loading:0,sending:!1}},validations:{mainDatas:{account:{required:o.required,minLength:(0,o.minLength)(3),maxLength:(0,o.maxLength)(30)},password:{required:o.required,minLength:(0,o.minLength)(3),maxLength:(0,o.maxLength)(30)}}},computed:{routeQuery:function(){return this.$route.query&&this.$route.query.continue&&(p.continue=this.$route.query.continue),{}}},beforeRouteEnter:function(t,n,e){e(function(t){t.fetchData()})},beforeRouteUpdate:function(t,n,e){this.fetchData(),e()},methods:{getValidationClass:function(t){var n=this.$v.mainDatas[t];if(n)return{"md-invalid":n.$invalid&&n.$dirty}},validateUser:function(){this.$v.$touch(),this.$v.$invalid||this.submitPost()},submitPost:function(){var t=this;this.sending=!0,this.$http.post("sys/auth/joins",this.mainDatas).then(function(n){t.sending=!1,t.$go({name:"auth.account.dashboard",query:t.routeQuery})}).catch(function(n){t.sending=!1,t.$toast(n)})},fetchData:function(){}}}},gExv:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("md-card",[e("form",{attrs:{novalidate:""},on:{submit:function(n){n.preventDefault(),t.validateUser(n)}}},[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[t._v("账号关联")]),t._v(" "),e("div",{staticClass:"md-body-1"},[t._v("添加更多账号")])]),t._v(" "),e("md-button",{staticClass:"md-icon-button md-list-action",attrs:{to:{name:"auth.account.dashboard",query:t.routeQuery}}},[e("md-icon",{staticClass:"md-primary"},[t._v("expand_more")])],1)],1),t._v(" "),e("md-card-content",[e("md-layout",[e("md-field",{class:t.getValidationClass("account"),attrs:{"md-clearable":""}},[e("label",[t._v("电子邮件地址或电话号码")]),t._v(" "),e("md-input",{attrs:{autocomplete:"off",disabled:t.sending},model:{value:t.mainDatas.account,callback:function(n){t.$set(t.mainDatas,"account",n)},expression:"mainDatas.account"}}),t._v(" "),t.$v.mainDatas.account.required?t._e():e("span",{staticClass:"md-error"},[t._v("请输入电子邮件地址或电话号码")])],1),t._v(" "),e("md-field",{class:t.getValidationClass("password")},[e("label",[t._v("输入您的密码")]),t._v(" "),e("md-input",{attrs:{autocomplete:"off",type:"password",disabled:t.sending},model:{value:t.mainDatas.password,callback:function(n){t.$set(t.mainDatas,"password",n)},expression:"mainDatas.password"}}),t._v(" "),t.$v.mainDatas.password.required?t._e():e("span",{staticClass:"md-error"},[t._v("请输入密码")])],1)],1)],1),t._v(" "),e("md-card-actions",[e("router-link",{attrs:{to:{name:"auth.account.dashboard"}}},[t._v("查看关联账号")]),t._v(" "),e("span",{staticClass:"flex"}),t._v(" "),e("md-button",{staticClass:"md-primary md-raised",attrs:{type:"submit",disabled:t.sending}},[t._v("关联账号")])],1),t._v(" "),e("md-divider"),t._v(" "),e("auth-sns",{attrs:{title:"绑定合作账号",type:"join"}}),t._v(" "),t.sending?e("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):t._e()],1)])},staticRenderFns:[]}},"h0K+":function(t,n,e){(t.exports=e("FZ+f")(void 0)).push([t.i,".login-sns[data-v-30221a1a]{text-align:center}.login-sns .md-icon-button[data-v-30221a1a]{margin:20px 36px 0 0;min-width:auto;box-shadow:none;width:50px;height:50px}.login-sns .md-icon-button .md-icon[data-v-30221a1a]{transition:all .345s;width:30px;height:30px;font-size:30px}.login-sns .md-icon-button:hover .md-icon[data-v-30221a1a]{-webkit-transform:scale(1.3);transform:scale(1.3)}",""])},jFJc:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}(),s=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKey="gmf.sys.auth."+window.location.host}return a(t,[{key:"get",value:function(){return JSON.parse(localStorage.getItem(this.storageKey))||[]}},{key:"has",value:function(t){return!1}},{key:"remove",value:function(t){if(t){for(var n=this.get(),e=0;e<n.length;e++)if(n[e].id==t.id){e;break}e>=0&&(n.splice(e,1),localStorage.setItem(this.storageKey,JSON.stringify(n)))}}},{key:"add",value:function(t){if(t){var n=this.get(),e=!1;n.forEach(function(n){n.id==t.id&&(e=!0)}),e||n.push(t),localStorage.setItem(this.storageKey,JSON.stringify(n))}}}]),t}();n.default=new s},y2Uo:function(t,n,e){var a=e("h0K+");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("678f90b9",a,!0)}});